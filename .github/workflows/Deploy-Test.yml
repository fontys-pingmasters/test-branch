# name: Build and Deploy to Test

# on:
#   workflow_dispatch:

# jobs:
#   build-and-deploy:
#     runs-on: test
#     environment:
#       name: test
#       url: https://test.pongello.nl/
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4

#       - name: copy paste compose file
#         run: |
#           scp ./docker/dockercomposetest.yml ${{ secrets.USERNAME }}@${{ secrets.HOST }}:/home/ansible/compose/
      
#       #ssh shit
#       - name: Deploy to test server
#         uses: appleboy/ssh-action@v1.2.0
#         with:
#           host: ${{ secrets.HOST }}
#           username: ${{ secrets.USERNAME }}
#           key: ${{ secrets.SSH_KEY }}
#           port: ${{ secrets.PORT }}
#           script: |
#             cd /home/ansible/compose
#             docker compose -f dockercomposetest.yml down
#             docker compose -f dockercomposetest.yml up --build -d
